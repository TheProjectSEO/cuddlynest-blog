function initScrollSpy(initialSectionId){const jumpLinks=document.querySelectorAll('.jump-links__link');const sections=document.querySelectorAll('.content-section');let currentActiveId=initialSectionId;function setActiveLink(sectionId){if(currentActiveId===sectionId)return;currentActiveId=sectionId;jumpLinks.forEach(link=>{link.classList.remove('jump-links__link--active')});const activeLink=document.querySelector(`.jump-links__link[href="#${sectionId}"]`);if(activeLink){activeLink.classList.add('jump-links__link--active')}}const observerOptions={root:null,rootMargin:'-20% 0px -60% 0px',threshold:0};const intersectingSections=new Set();const observer=new IntersectionObserver(function(entries){entries.forEach(entry=>{const sectionId=entry.target.getAttribute('id');if(entry.isIntersecting){intersectingSections.add(sectionId)}else{intersectingSections.delete(sectionId)}});if(intersectingSections.size>0){let topmostSection=null;let topmostPosition=Infinity;intersectingSections.forEach(sectionId=>{const section=document.getElementById(sectionId);if(section){const rect=section.getBoundingClientRect();if(rect.top<topmostPosition){topmostPosition=rect.top;topmostSection=sectionId}}});if(topmostSection){setActiveLink(topmostSection)}}},observerOptions);sections.forEach(section=>{observer.observe(section)});jumpLinks.forEach(link=>{link.addEventListener('click',function(e){e.preventDefault();const targetId=this.getAttribute('href').substring(1);const targetSection=document.getElementById(targetId);if(targetSection){targetSection.scrollIntoView({behavior:'smooth',block:'start'});setActiveLink(targetId)}})})}document.addEventListener('DOMContentLoaded',function(){});
